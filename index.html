<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test API GAS</title>
</head>
<body>
  <h1>Test Google Apps Script</h1>
  <button onclick="probarGET()">Probar GET</button>
  <button onclick="probarPOST()">Probar POST</button>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyBO3W5MDTpVs-WQqkLYwH-Tx-Y5O3RL75GEBgxICdzyLD3y5u17-gBLFcIPZI7XsLf/exec";

    async function probarGET() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        console.log("GET OK:", data);
        alert("GET OK (mira la consola)");
      } catch (err) {
        console.error("Error GET:", err);
      }
    }

    async function probarPOST() {
      try {
        const res = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            referencia: "TEST-123",
            centro: "Eroski",
            solicitadoPor: "Tester",
            descripcion: "Incidencia de prueba",
            materiales: "Ninguno",
            foto: "",
            fechaApertura: new Date().toISOString(),
            fechaCierre: "",
            cerrada: false
          })
        });
        const data = await res.json();
        console.log("POST OK:", data);
        alert("POST OK (mira la consola)");
      } catch (err) {
        console.error("Error POST:", err);
      }
    }
  </script>
</body>
</html>
